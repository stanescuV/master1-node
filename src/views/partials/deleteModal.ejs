<!-- Delete Modal -->
<div id="deleteModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
  <div class="bg-white rounded-xl shadow-2xl p-6 max-w-md mx-4">
    <div class="flex items-center gap-3 mb-4">
      <div class="w-12 h-12 rounded-full bg-red-100 flex items-center justify-center">
        <%- icon('AlertTriangle', { size: 24, class: 'text-red-600' }) %>
      </div>
      <h3 class="text-xl font-bold text-gray-800">Confirmer la suppression</h3>
    </div>
    <p class="text-gray-600 mb-6">
      Etes-vous sur de vouloir supprimer <%= typeof itemType !== 'undefined' ? itemType : 'cet element' %> "<span id="deleteItemName" class="font-semibold text-gray-800"></span>" ?
      Cette action est irreversible.
    </p>
    <div class="flex justify-end gap-3">
      <button type="button" onclick="closeDeleteModal()" class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium transition-colors cursor-pointer">
        Annuler
      </button>
      <form id="deleteForm" method="POST" class="inline">
        <button type="submit" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors inline-flex items-center gap-2 cursor-pointer">
          <%- icon('Trash2', { size: 18 }) %>
          Supprimer
        </button>
      </form>
    </div>
  </div>
</div>

<script>
  function openDeleteModal(id, nameOrBtn, basePath) {
    const name = typeof nameOrBtn === 'string' ? nameOrBtn : nameOrBtn.getAttribute('data-name');
    document.getElementById('deleteItemName').textContent = name;
    document.getElementById('deleteForm').action = basePath + '/' + id + '/delete';
    document.getElementById('deleteModal').classList.remove('hidden');
    document.getElementById('deleteModal').classList.add('flex');
  }

  function closeDeleteModal() {
    document.getElementById('deleteModal').classList.add('hidden');
    document.getElementById('deleteModal').classList.remove('flex');
  }

  document.getElementById('deleteModal').addEventListener('click', function(e) {
    if (e.target === this) {
      closeDeleteModal();
    }
  });
</script>
